# Hardware API

This is the repository for the Hardware API. 
## TL;DR

The solution should cover the following:
- [X] customers should be able to view a list of all products
- [X] administrators should be able to add new products to the system
- [X] administrators should be able to modify existing products in the system
- [X] administrators should be able to remove products from the system
- [X] customers should be able to place an order that includes a collection of products in varying quantities


## To Do
- Authentication/Authorisation Flow. Currently there's a boilerplate placeholder that filters all API requests, but some endpoints
can only be called by an Admin user so we need an implementation that builds a token for a specific user and then checks which roles that user has.
- I haven't added a User/Customer table yet. Depending on the requirements of the system this could be one table (i.e. same table for users and customers) or two tables.
- My tests cover the logic and Database connection, so we assume the API requests are being correctly deserialised, injected into the logic, and then the response is correctly serialised.
I'd add some integration tests that cover the API endpoints against a running server.
- Hook up a DaoFactory so that the DAOs are injected into the resources. Instead of calling new Dao() we call DaoFactory.getDao();
- Missing endpoints not included in the spec, e.g. GET `/product/{id}` for a single product, or GET `/order` for orders. I'd add these in if I had more time.

## Tech Stack
### Dropwizard
The API is built using Dropwizard. Dropwizard is a Java framework for building RESTful web services.
Dropwizard is a Java framework for building RESTful web services. It is a lightweight framework that provides a lot of functionality out of the box. It is also very easy to extend and customize.
### Flyway 
Flyway is used to manage database migrations. The migrations are located in the `src/main/resources/db/migration` directory. The migrations can be run by using the `flywayMigrate` gradle task.
### JOOQ 
JOOQ is used to generate Java classes from the database schema. The classes are generated from a local DB Connection. The classes are generated by running the `generateJooq` gradle task. The classes are generated into the `src/main/generated` directory.
### Hikari 
Hikari is a connection pool for the database. 
### Docker 
Docker gives us a local database instance, and can be used to package the API into a container. The Database can be started by running the `docker-compose up` command.

## Running the API
Run the `APIApplication` class main method with the following arguments to start the API:
`server api-server-template.yml`
## Running the tests
You'll need Docker installed on your machine in order to run the tests. The tests spin up a docker container running postgres, 
populate it with some data, and then run the tests against the database.

